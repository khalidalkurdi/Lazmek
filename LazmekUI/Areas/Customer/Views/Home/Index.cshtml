@model HomeIndexVM 
<div class="px-5">
    <div class="m-3 overflow-x-auto overflow-y-hidden" style="white-space: nowrap;">
        <ul class="nav nav-tabs flex-nowrap justify-content-center">
            @foreach (var category in Model.categories)
            {
                if (Model.categorytSelected== category)
                {
                    <li class="nav-item">
                        <a class="nav-link active bg-dark-mode text-white "
                           asp-controller="Home" asp-action="Index">
                            @category
                        </a>
                    </li>
                }
                else
                {
                    <li class="nav-item">
                        <a class="nav-link text-black"
                           asp-control           ler="Home" asp-action="Index"
                           asp-route-category="@category">
                            @category
                        </a>
                    </li>
                }
            }
        </ul>
    </div>
    @if(string.IsNullOrEmpty(Model.categorytSelected)){  
        <!--  sm screen -->
        <div> Randomly </div>
        <hr />
        <div id="productsCarouselsm" class="carousel slide d-md-none" data-bs-ride="carousel">
            <div class="carousel-inner">
                @for (int i = 0; i < Model.products.Count(); i++)
                {
                    <div class="carousel-item @(i == 0 ? "active" : "")">
                        <div class="card border-0 border-2 border-top rounded shadow p-2">
                            @if (Model.products[i].ProductImages != null && Model.products[i].ProductImages.Any())
                            {
                                <img src="@Model.products[i].ProductImages.First().ImageUrl" class="card-img-top rounded" />
                            }
                            else
                            {
                                <img src="https://placehold.co/500x600/png" class="card-img-top rounded" style="height:12rem" />
                            }

                            <div class="card-body pb-0 text-center">
                                <p class="h5 text-dark opacity-75 text-uppercase text-nowrap overflow-hidden">@Model.products[i].Title</p>
                                <p class="text-warning mb-1"> <b>@Model.products[i].Brand</b></p>
                                <p class="text-dark opacity-75 mb-0">
                                    Price : <span class="text-decoration-line-through">@Model.products[i].ListPrice.ToString("c")</span>
                                </p>
                                <p class="text-dark opacity-75">
                                    After discount : <span>@Model.products[i].Price100.ToString("c")</span>
                                </p>
                                <p class="fs-5">
                                    @for (int j = 1; j <= 5; j++)
                                    {
                                        if (j <= Math.Floor(Model.products[i].Rating))
                                        {
                                            <i class="fa-solid fa-star text-warning"></i>
                                        }
                                        else if (j == Math.Ceiling(Model.products[i].Rating) && Model.products[i].Rating % 1 != 0)
                                        {
                                            <i class="fa-solid fa-star-half-stroke text-warning"></i>
                                        }
                                        else
                                        {
                                            <i class="fa-regular fa-star text-warning"></i>
                                        }
                                    }
                                    <span>/ @Model.products[i].Rating.ToString("0.0")</span>
                                </p>
                            </div>

                            <div>
                                <a asp-action="Details" asp-route-producdId="@Model.products[i].Id"
                                   class="btn btn-primary bg-dark-mode bg-gradient border-0 form-control">
                                    View Details
                                </a>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <!-- Controls -->
            <button class="carousel-control-prev d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#productsCarouselsm" data-bs-slide="prev"
                    style="width:45px; height:45px; top:50%; left:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>

            <button class="carousel-control-next d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#productsCarouselsm" data-bs-slide="next"
                    style="width:45px; height:45px; top:50%; right:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>


        <!-- lg screen -->
        <div id="productsCarousellg" class="carousel slide d-none d-md-block" data-bs-ride="carousel">
            <div class="carousel-inner">
                @for (int i = 0; i < Model.products.Count(); i += 4)
                {
                    <div class="carousel-item @(i == 0 ? "active" : "")">
                        <div class="row pb-3">
                            @foreach (var product in Model.products.Skip(i).Take(4))
                            {
                                <div class="col-lg-3 col-sm-6">
                                    <div class="card border-0 border-2 border-top rounded shadow p-2">
                                        @if (product.ProductImages != null && product.ProductImages.Any())
                                        {
                                            <img src="@product.ProductImages.First().ImageUrl" class="card-img-top rounded" />
                                        }
                                        else
                                        {
                                            <img src="https://placehold.co/500x600/png" class="card-img-top rounded" style="height:12rem" />
                                        }

                                        <div class="card-body pb-0 text-center">
                                            <p class="h5 text-dark opacity-75 text-uppercase text-nowrap overflow-hidden">@product.Title</p>
                                            <p class="text-warning mb-1"> <b>@product.Brand</b></p>
                                            <p class="text-dark opacity-75 mb-0">
                                                Price : <span class="text-decoration-line-through">@product.ListPrice.ToString("c")</span>
                                            </p>
                                            <p class="text-dark opacity-75">
                                                After discount : <span>@product.Price100.ToString("c")</span>
                                            </p>
                                            <p class="fs-5">
                                                @for (int j = 1; j <= 5; j++)
                                                {
                                                    if (j <= Math.Floor(product.Rating))
                                                    {
                                                        <i class="fa-solid fa-star text-warning"></i>
                                                    }
                                                    else if (j == Math.Ceiling(product.Rating) && product.Rating % 1 != 0)
                                                    {
                                                        <i class="fa-solid fa-star-half-stroke text-warning"></i>
                                                    }
                                                    else
                                                    {
                                                        <i class="fa-regular fa-star text-warning"></i>
                                                    }
                                                }
                                                <span>/ @product.Rating.ToString("0.0")</span>
                                            </p>
                                        </div>

                                        <div>
                                            <a asp-action="Details" asp-route-producdId="@product.Id"
                                                class="btn btn-primary bg-dark-mode bg-gradient border-0 form-control">
                                                View Details
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>

            <!-- Controls -->
            <button class="carousel-control-prev d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#productsCarousellg" data-bs-slide="prev"
                    style="width:45px; height:45px; top:50%; left:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>

            <button class="carousel-control-next d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#productsCarousellg" data-bs-slide="next"
                    style="width:45px; height:45px; top:50%; right:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <div class="mt-5"> Top Ratting </div>
        <hr />
        <div id="topproductsCarouselsm" class="carousel slide d-md-none" data-bs-ride="carousel">
            <div class="carousel-inner">
                @for (int i = 0; i < Model.TopProducts.Count(); i++)
                {
                    <div class="carousel-item @(i == 0 ? "active" : "")">
                        <div class="card border-0 border-2 border-top rounded shadow p-2">
                            @if (Model.TopProducts[i].ProductImages != null && Model.TopProducts[i].ProductImages.Any())
                            {
                                <img src="@Model.TopProducts[i].ProductImages.First().ImageUrl" class="card-img-top rounded" />
                            }
                            else
                            {
                                <img src="https://placehold.co/500x600/png" class="card-img-top rounded" style="height:12rem" />
                            }

                            <div class="card-body pb-0 text-center">
                                <p class="h5 text-dark opacity-75 text-uppercase text-nowrap overflow-hidden">@Model.TopProducts[i].Title</p>
                                <p class="text-warning mb-1"> <b>@Model.TopProducts[i].Brand</b></p>
                                <p class="text-dark opacity-75 mb-0">
                                    Price : <span class="text-decoration-line-through">@Model.TopProducts[i].ListPrice.ToString("c")</span>
                                </p>
                                <p class="text-dark opacity-75">
                                    After discount : <span>@Model.TopProducts[i].Price100.ToString("c")</span>
                                </p>
                                <p class="fs-5">
                                    @for (int j = 1; j <= 5; j++)
                                    {
                                        if (j <= Math.Floor(Model.TopProducts[i].Rating))
                                        {
                                            <i class="fa-solid fa-star text-warning"></i>
                                        }
                                        else if (j == Math.Ceiling(Model.TopProducts[i].Rating) && Model.TopProducts[i].Rating % 1 != 0)
                                        {
                                            <i class="fa-solid fa-star-half-stroke text-warning"></i>
                                        }
                                        else
                                        {
                                            <i class="fa-regular fa-star text-warning"></i>
                                        }
                                    }
                                    <span>/ @Model.TopProducts[i].Rating.ToString("0.0")</span>
                                </p>
                            </div>

                            <div>
                                <a asp-action="Details" asp-route-producdId="@Model.TopProducts[i].Id"
                                   class="btn btn-primary bg-dark-mode bg-gradient border-0 form-control">
                                    View Details
                                </a>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <!-- Controls -->
            <button class="carousel-control-prev d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#topproductsCarouselsm" data-bs-slide="prev"
                    style="width:45px; height:45px; top:50%; left:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>

            <button class="carousel-control-next d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#topproductsCarouselsm" data-bs-slide="next"
                    style="width:45px; height:45px; top:50%; right:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>


        <!-- lg screen -->
        <div id="topproductsCarousellg" class="carousel slide d-none d-md-block" data-bs-ride="carousel">
            <div class="carousel-inner">
                @for (int i = 0; i < Model.TopProducts.Count(); i += 4)
                {
                    <div class="carousel-item @(i == 0 ? "active" : "")">
                        <div class="row pb-3">
                            @foreach (var product in Model.TopProducts.Skip(i).Take(4))
                            {
                                <div class="col-lg-3 col-sm-6">
                                    <div class="card border-0 border-2 border-top rounded shadow p-2">
                                        @if (product.ProductImages != null && product.ProductImages.Any())
                                        {
                                            <img src="@product.ProductImages.First().ImageUrl" class="card-img-top rounded" />
                                        }
                                        else
                                        {
                                            <img src="https://placehold.co/500x600/png" class="card-img-top rounded" style="height:12rem" />
                                        }

                                        <div class="card-body pb-0 text-center">
                                            <p class="h5 text-dark opacity-75 text-uppercase text-nowrap overflow-hidden">@product.Title</p>
                                            <p class="text-warning mb-1"> <b>@product.Brand</b></p>
                                            <p class="text-dark opacity-75 mb-0">
                                                Price : <span class="text-decoration-line-through">@product.ListPrice.ToString("c")</span>
                                            </p>
                                            <p class="text-dark opacity-75">
                                                After discount : <span>@product.Price100.ToString("c")</span>
                                            </p>
                                            <p class="fs-5">
                                                @for (int j = 1; j <= 5; j++)
                                                {
                                                    if (j <= Math.Floor(product.Rating))
                                                    {
                                                        <i class="fa-solid fa-star text-warning"></i>
                                                    }
                                                    else if (j == Math.Ceiling(product.Rating) && product.Rating % 1 != 0)
                                                    {
                                                        <i class="fa-solid fa-star-half-stroke text-warning"></i>
                                                    }
                                                    else
                                                    {
                                                        <i class="fa-regular fa-star text-warning"></i>
                                                    }
                                                }
                                                <span>/ @product.Rating.ToString("0.0")</span>
                                            </p>
                                        </div>

                                        <div>
                                            <a asp-action="Details" asp-route-producdId="@product.Id"
                                               class="btn btn-primary bg-dark-mode bg-gradient border-0 form-control">
                                                View Details
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>

            <!-- Controls -->
            <button class="carousel-control-prev d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#topproductsCarousellg" data-bs-slide="prev"
                    style="width:45px; height:45px; top:50%; left:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>

            <button class="carousel-control-next d-flex align-items-center justify-content-center" type="button"
                    data-bs-target="#topproductsCarousellg" data-bs-slide="next"
                    style="width:45px; height:45px; top:50%; right:-20px; transform:translateY(-50%); background:rgba(0,0,0,0.5); border-radius:50%;">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
       
    }
    else{
     <div class="row">
            @foreach (var product in Model.products)
            {
                <div class="col-md-3 col-sm-12">
                    <div class="card border-0 border-2 border-top rounded shadow p-2">
                        @if (product.ProductImages != null && product.ProductImages.Any())
                        {
                            <img src="@product.ProductImages.First().ImageUrl" class="card-img-top rounded" />
                        }
                        else
                        {
                            <img src="https://placehold.co/500x600/png" class="card-img-top rounded" style="height:12rem" />
                        }

                        <div class="card-body pb-0 text-center">
                            <p class="h5 text-dark opacity-75 text-uppercase text-nowrap overflow-hidden">@product.Title</p>
                            <p class="text-warning mb-1"> <b>@product.Brand</b></p>
                            <p class="text-dark opacity-75 mb-0">
                                Price : <span class="text-decoration-line-through">@product.ListPrice.ToString("c")</span>
                            </p>
                            <p class="text-dark opacity-75">
                                After discount : <span>@product.Price100.ToString("c")</span>
                            </p>
                            <p class="fs-5">
                                @for (int j = 1; j <= 5; j++)
                                {
                                    if (j <= Math.Floor(product.Rating))
                                    {
                                        <i class="fa-solid fa-star text-warning"></i>
                                    }
                                    else if (j == Math.Ceiling(product.Rating) && product.Rating % 1 != 0)
                                    {
                                        <i class="fa-solid fa-star-half-stroke text-warning"></i>
                                    }
                                    else
                                    {
                                        <i class="fa-regular fa-star text-warning"></i>
                                    }
                                }
                                <span>/ @product.Rating.ToString("0.0")</span>
                            </p>
                        </div>

                        <div>
                            <a asp-action="Details" asp-route-producdId="@product.Id"
                               class="btn btn-primary bg-dark-mode bg-gradient border-0 form-control">
                                View Details
                            </a>
                        </div>
                    </div>
                </div>
            }
    </div>
    }

</div>
